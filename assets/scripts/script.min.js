jQuery(document).ready(function(c){var g='[id^="spin_game_gh_"] ';c(document).on("mousedown",g+".spin-start",function(){if(c(this).hasClass("disabled")){return}f(c(this))});c(document).on("click",g+".restart",function(){var h=c(this).closest(".spin_game_gh");h.find(".spin_result").addClass("leave");setTimeout(function(){h.find(".spin_overlay").hide()},800);h.find(".spin-start").removeClass("disabled")});function f(k){var j=k.closest(".spin_game_gh");var l=j.find(".roulette").attr("id").split("_")[2];var h=j.find(".roulette .gh_spinner");c("#spin_close_global").fadeOut();c(".pres_spin_anim").addClass("anim");a(j,"spin");var i={name:j.find('[name="name"]').val(),email:j.find('[name="email"]').val(),spin_id:l,action:"spin_start_gh"};c.ajax({url:spinGh.ajaxUrl,method:"post",data:i}).done(function(m){c(".pres_spin_anim").removeClass("anim");c("#spin_close_global").fadeIn();i=JSON.parse(m);if(i.status=="error"){j.find(".spin_result .image_wrapper").html("");j.find(".spin_result .message_area").html(i.message);j.find(".spin_result .claim").hide();j.find(".spin_result .restart").hide();j.find(".spin_overlay").show();setTimeout(function(){j.find(".spin_result").removeClass("leave")},500);return}var n="index-";h.toggleClass("spin");h.get(0).className=h.get(0).className.replace(new RegExp("(^|\\s)"+n+"\\S+","g"),"");h.addClass(n+i.winNumber);j.find(".spin_overlay").show();setTimeout(function(){j.find(".spin_result .image_wrapper .win_image").remove();j.find(".spin_result .image_wrapper").prepend(i.itemImage);j.find(".spin_result .message_area").html(i.message);j.find(".spin_result .claim").show();if(i.lastSpin){j.find(".spin_result .restart").hide()}else{j.find(".spin_result .restart").show()}j.find(".spin_result").removeClass("leave");if(i.type=="no_prize"){a(j,"lose")}else{a(j,"win")}},parseInt(j.data("duration"))+800)})}c(document).on("click",g+".playnow",function(){var j=c(this).closest(".spin_game_gh");var i=j.find(".gh_spin_form");var h=false;if(i.find('[name="name"]').val().trim()==""){i.find('[name="name"]').addClass("error");i.find('[name="name"]').closest("label").find(".error_message").html(spinGh.l10n.nameRequired);h=true}else{i.find('[name="name"]').removeClass("error")}if(i.find('[name="email"]').val().trim()==""){i.find('[name="email"]').addClass("error");i.find('[name="email"]').closest("label").find(".error_message").html(spinGh.l10n.emailRequired);h=true}else{if(!b(i.find('[name="email"]').val())){i.find('[name="email"]').addClass("error");i.find('[name="email"]').closest("label").find(".error_message").html(spinGh.l10n.emailNotValid);h=true}else{i.find('[name="email"]').removeClass("error")}}if(!h){setCookie("wp-spinner-opened","1",0.5);i.addClass("leave");j.find(".spin-start").removeClass("disabled");setTimeout(function(){j.find(".spin_overlay").hide();i.hide()},800)}});c(document).on("focus",g+".gh_spin_form input",function(){c(this).removeClass("error");c(this).closest("label").find(".error_message").html("")});function b(h){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(h)}c(document).on("click",g+".claim",function(){var j=c(this);if(j.hasClass("disabled")){return}j.addClass("disabled");var i=j.closest(".spin_game_gh");var h=i.find(".claimform").serialize();c.ajax({url:spinGh.ajaxUrl,method:"post",data:h}).done(function(k){j.removeClass("disabled");try{var l=JSON.parse(k)}catch(m){console.warn(m);return}if(l.status=="ok"){i.find(".buttons").slideUp();i.find(".spin_result .image_wrapper .success").removeClass("leave")}else{i.find(".buttons").html("<h3> "+l.message+" </h3>")}})});c(window).resize(function(){c.each(c(".spin_game_gh .gh_spinner"),function(h,m){var j=c(m);var l=j.closest(".spinwheel");var k=j.closest(".spin_game_gh").width()||c(document).width();if(j.width()>k){var i=Math.floor(parseInt(k)/parseInt(j.width())*100);l.css({zoom:i+"%"})}else{l.css({zoom:"100%"})}})}).resize();c(document).on("click","#spin_open_global  .open",function(){var h=c("#spin_global_popup .spin_game_gh");c("#spin_global_popup").fadeIn();if(c("#spin_global_popup .gh_spin_form").is(":visible")){a(h,"background")}c(window).resize()});function e(j){var k=c('<a href="#" id="fakeClick"></a>');k.bind("click",function(l){l.preventDefault();j()});c("body").append(k);var h,i=c("#fakeClick").get(0);if(document.createEvent){h=document.createEvent("MouseEvents");if(h.initMouseEvent){h.initMouseEvent("click",true,true,window,0,0,0,0,0,false,false,false,false,0,null);i.dispatchEvent(h)}}c(i).remove()}function d(l){var k=0;var n=c("audio");if(l){n=n.not(".sounds_wrapper ."+l)}for(var j=0;j<n.length;j++){var m=n.get(j);var h=m.volume;if(h>0.2){m.volume=h-0.1}else{k++;m.pause();m.currentTime=0}}if(k<n.length){setTimeout(function(){d(l)},100)}}function a(j,i){d(i);var h=j.find(".sounds_wrapper ."+i);if(h.length){h.get(0).volume=1;e(function(){h.get(0).play()})}}(function(){var h=parseInt(c("#spin_open_global").attr("data-timeout"));if(h>-1&&getCookie("wp-spinner-opened")!=="1"){setTimeout(function(){c("#spin_open_global .open").click()},h)}})();c(document).on("click","#spin_close_global",function(){c("#spin_global_popup").fadeOut();d()})});function setCookie(b,f,c){var e=new Date();e.setTime(e.getTime()+(c*24*60*60*1000));var a="expires="+e.toUTCString();document.cookie=b+"="+f+";"+a}function getCookie(d){var b=d+"=";var f=decodeURIComponent(document.cookie);var a=f.split(";");for(var e=0;e<a.length;e++){var g=a[e];while(g.charAt(0)==" "){g=g.substring(1)}if(g.indexOf(b)==0){return g.substring(b.length,g.length)}}return""};